# 变更日志

所有显著的项目变更都会记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
本项目遵循 [语义化版本控制](https://semver.org/lang/zh-CN/)。

## [1.0.0] - 2024-01-01

### 新增
- 🎨 高质量Mermaid图表渲染功能
- 🔄 双模式支持（stdio + SSE）
- 🛡️ 完善的输入校验和安全性措施
- 📊 支持多种图表类型检测
- 🚀 隔离渲染环境，避免全局污染
- 💚 健康检查和连接管理
- 🌐 现代化Web测试界面
- 📋 丰富的API端点
- 🔧 环境变量配置支持

### 技术改进
- **全局污染解决方案**: 使用独立JSDOM实例，避免多用户并发问题
- **稳健的SVG处理**: DOM解析器插入title元素，比字符串替换更可靠
- **精细的图表类型检测**: 正则表达式精确匹配各种Mermaid图表
- **输入校验**: 字符串长度限制、恶意内容检测、文件名清理
- **SSE连接管理**: 自动清理、优雅关闭、错误处理
- **构建优化**: tsup构建配置，ESM输出，源码映射

### 工程实践
- **目录结构重构**: 模块化设计，职责分离
- **TypeScript严格模式**: 全面的类型检查和安全性
- **现代化工具链**: pnpm + tsup + TypeScript 5.x
- **完善的文档**: README、API文档、部署指南
- **开发体验**: 热重载、错误处理、调试支持

### 性能优化
- 隔离渲染环境，避免内存泄漏
- 连接池管理，提高并发性能
- 临时文件自动清理
- 优雅的错误处理和恢复

### 安全性
- 输入内容校验和过滤
- CORS配置和域名白名单
- 文件名安全化处理
- XSS防护措施 